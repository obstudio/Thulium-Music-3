<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Thulium Music</title>
    <script>
      const Thulium = require('../init')
    </script>
    <link href="editor.css" rel="stylesheet">
    <link href="document.css" rel="stylesheet">
    <link href="../index.css" rel="stylesheet">
    <link href="../node_modules/element-ui/lib/theme-chalk/index.css" rel="stylesheet">
    <link href="../node_modules/element-ui/lib/theme-chalk/display.css" rel="stylesheet">
  </head>
  <body>
    <script>
      // Monaco uses a custom amd loader that overrides node's require.
      // Keep a reference to node's require so we can restore it after executing the amd loader file.
      var nodeRequire = global.require;
    </script>
    <script src="../node_modules/monaco-editor/min/vs/loader.js" type="text/javascript"></script>
    <script>
      // Save Monaco's amd require and restore Node's require
      var amdRequire = global.require;
      global.require = nodeRequire;
    </script>

    <script>
      const path = require('path');

      function uriFromPath(...paths) {
        const result = path.resolve(path.join(...paths)).split(path.sep)
          .map(name => name
            .replace(/#/g, '%23')
            .replace(/ /g, '%20')
          ).join('/')
        console.log('file:///' + result)
        return 'file:///' + result
      }

      amdRequire.config({
        baseUrl: uriFromPath(__dirname, '../node_modules/monaco-editor/min')
      })

      // workaround monaco-css not understanding the environment
      self.module = undefined
      // workaround monaco-typescript not understanding the environment
      self.process.browser = true
    </script>
      
    <div class="navbar">铥铥播放器 Thulium Music</div>
    <div id="app" class="window"></div>
    <script src="main.js" type="text/javascript"></script>
    <div class="status">铥铥播放器 Thulium Music</div>
  </body>
</html>
